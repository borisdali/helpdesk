image:
  repository: helpdesk
  tag: latest
  pullPolicy: IfNotPresent

# LLM model configuration. All agents and the orchestrator use these.
model:
  # Supported vendors: anthropic, gemini (or google)
  vendor: anthropic
  # Model names by vendor:
  #   Anthropic: claude-haiku-4-5-20251001, claude-sonnet-4-20250514, claude-opus-4-5-20251101
  #   Gemini:    gemini-2.5-flash, gemini-2.5-flash-lite, gemini-2.5-pro,
  #              gemini-3-flash-preview, gemini-3-pro-preview
  # Note: Gemini 1.x and 2.0 models are retired and will return errors.
  name: claude-haiku-4-5-20251001
  # Name and key of a pre-existing Kubernetes Secret containing the API key.
  apiKeySecret: helpdesk-api-key
  apiKeyKey: api-key

agents:
  database:
    replicas: 1
    port: 1100
    # Optional: Name of a Secret containing .pgpass file for passwordless auth.
    # Create the secret with: kubectl create secret generic pgpass --from-file=.pgpass=./pgpass
    # File format: hostname:port:database:username:password
    pgpassSecret: ""

  k8s:
    replicas: 1
    port: 1102
    rbac:
      # Create a ServiceAccount, ClusterRole, and ClusterRoleBinding so the
      # K8s agent can query cluster resources via in-cluster kubectl.
      create: true

  incident:
    replicas: 1
    port: 1104
    persistence:
      enabled: true
      size: 10Gi
      storageClass: ""    # empty string = use cluster default

  # Research agent for Gemini models - provides web search via GoogleSearch.
  # GoogleSearch cannot be combined with function declarations, so this agent
  # handles web searches separately. Automatically included when using Gemini.
  research:
    replicas: 1
    port: 1106

gateway:
  replicas: 1
  port: 8080
  service:
    type: ClusterIP       # set to LoadBalancer for external access

orchestrator:
  # Deploy an interactive pod that users can exec into.
  enabled: true
  # Streaming mode for LLM responses: "sse" (streaming) or "none" (disabled).
  # Default "none" works around ADK REPL bug in containers.
  # Set to "sse" to enable streaming if the bug is fixed.
  streamingMode: "none"

# Infrastructure inventory — database servers, K8s clusters, and VMs the
# orchestrator knows about. Passed to the LLM so it can pick the right
# connection strings when calling agents. Leave empty to skip.
#
# Example:
#   infrastructure:
#     db_servers:
#       prod-db:
#         name: "Production Database"
#         connection_string: "host=db.example.com port=5432 dbname=app user=admin"
#         k8s_cluster: "prod"
#         k8s_namespace: "databases"
#     k8s_clusters:
#       prod:
#         name: "Production Cluster"
#         context: "prod-cluster"
#     vms: {}
infrastructure: {}

# ─────────────────────────────────────────────────────────────────────────────
# AI Governance Configuration
# ─────────────────────────────────────────────────────────────────────────────
governance:
  # Audit daemon - central audit logging and approval workflow API
  auditd:
    enabled: true
    port: 1199
    persistence:
      enabled: true
      size: 5Gi
      storageClass: ""

  # Real-time audit monitoring and alerting
  auditor:
    enabled: false
    # Webhook URL for alerts (Slack, etc.)
    alertWebhook: ""

  # Security responder bot
  secbot:
    enabled: false
    port: 9091
    # Cooldown between incident creations
    cooldown: "5m"
    # Max events per minute before high-volume alert
    maxEventsPerMinute: 100

  # Governance compliance reporter (runs as a Kubernetes CronJob)
  govbot:
    enabled: false
    # Cron schedule for automated compliance reports (default: daily at 08:00 UTC)
    schedule: "0 8 * * *"
    # Look-back window for audit event analysis
    since: "24h"
    # Slack webhook URL for posting the compliance summary (optional)
    webhook: ""

  # Policy configuration
  policy:
    # Enable policy-based access control
    enabled: false
    # Name of ConfigMap containing policies.yaml
    configMap: ""

  # Operating mode: set to "fix" to require all governance modules (audit, policy,
  # approvals) to be active before agents will start. Agents refuse to start if any
  # required module is missing or misconfigured.
  # Leave empty (default) for normal operation.
  operatingMode: ""

  # Approval workflow settings
  approvals:
    # Default timeout for approval requests
    timeout: "5m"
    # Webhook URL for approval notifications (Slack, etc.)
    webhook: ""
    # Base URL for approve/deny links in emails
    baseURL: ""

  # Email notifications for approvals and alerts
  email:
    enabled: false
    smtpHost: ""
    smtpPort: "587"
    # Name of Secret containing SMTP credentials (keys: username, password)
    smtpSecret: ""
    from: ""
    to: ""  # comma-separated
